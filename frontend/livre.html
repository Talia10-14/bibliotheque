<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="livre.css">
    <link rel="stylesheet" href="tbadmin.css">
    <title>Nos livres disponible</title>
</head>

<body>
    <div class="page-wrapper">
        <header>
            <div class="logo">
                <i class="fas fa-book-open"></i>
                <span>Bibliotech</span>
            </div>
            <span class="tablo-biblio">Bibliothécaire</span>
        </header>
        <div class="dashboard-layout">
            <aside class="sidebar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="accueil.html">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tbbiblio.html">Statistiques</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tbbiblio.html">Gestion des utilisateurs</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tbbiblio.html">Actions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="livre.html">Livre</a>
                    </li>
                     <li class="nav-item">
                     <button onclick="ouvrirModal('modal-ajouter-livre')" >ajouter un nouveau livre</button>
                </li>
                </ul>
            </aside>
            <main>

        <div class="search-box">
                <input id="search-input" type="text" placeholder="Rechercher un livre, un auteur ou un sujet...">
                <button id="search-button" type="button"><i class="fas fa-search"></i></button>
            </div>
                <div class="d3">
                    <div class="div1">
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                        <div class="d2">
                            <img src=" " alt="Face du livre">
                            <h3>Nom du livre</h3>
                            <p><strong>Auteur :</strong> Bla Bla</p>
                            <p><strong>Catégorie :</strong> Drame</p>
                            <button>Modifier</button>
                            <button>Supprimer</button>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>
                                    <p><strong>Face et Titre</strong></p>
                                </th>
                                <th>
                                    <p><strong>Description et Auteur</strong></p>
                                </th>
                                <th>
                                    <p><strong>Date d'ajout</strong></p>
                                </th>
                                <th>
                                    <p><strong>Actions</strong></p>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <img src=" " alt="Face du livre">
                                    <p>Titre Livre1</p>
                                </td>
                                <td>
                                    Nom auteur & Description
                                </td>
                                <td>
                                    <input type="date">
                                </td>
                                <td>
                                    <button>Modifier</button>
                                    <button>Supprimer</button>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                        </tfoot>

                    </table>
                </div>
<div id="modal-ajouter-livre" class="modal hidden ">
    <div class="modal-content">
      <h3>Ajouter un Livre</h3>
      <form id="form-ajouter-livre">
        <input type="text" name="titre" placeholder="Titre du livre" required>
        <input type="text" name="auteur" placeholder="Auteur" required>
        <input type="date"  name="annee" id="annee" required>
        <label for="categorie">Catégorie :</label>
        <select id="categorie" name="categorie" required>
          <option value="">-- Sélectionnez une catégorie --</option>
          <option value="roman">Roman</option>
          <option value="science">Science</option>
          <option value="histoire">Histoire</option>
          <option value="biographie">Biographie</option>
          <option value="informatique">Informatique</option>
        </select>
      
        <input type="file" name="ficher" id="ficher" required>
        <input type="text" name="isbn" placeholder="ISBN (optionnel)">
        <input type="text" name="edition"  placeholder="Édition (optionnel)">
        <div>
            <input type="checkbox" name="disponible" id="disponible" checked>
            <label for="disponible">Disponible</label>
        </div>
        <button type="submit">Ajouter</button>
        <button type="button" onclick="fermerModal('modal-ajouter-livre')">Annuler</button>
      </form>
    </div>
  </div>
            </main>
        </div>

        <footer>
            <div class="footer-logo">
                <i class="fas fa-book-open"></i>
                <span>Bibliotech</span>
            </div>
            <p>© 2025 BiblioTech. Tous droits réservés.</p>
            <p><a href="#conditions">Conditions d'utilisation</a> | <a href="#confidentialite">Politique de
                    confidentialité</a></p>
        </footer>
    </div>
    <script>
          function ouvrirModal(id) {
   const element= document.getElementById(id)
    console.log(element);
    element.style.display="block"
    
}

function fermerModal(id) {
    const element= document.getElementById(id)
    console.log(element);
    element.style.display="none"
}
const form = document.getElementById('form-ajouter-livre');

form.addEventListener('submit', async e => {
  e.preventDefault();
    const formData = new FormData(form);
  console.log("form",formData);
  formData.values

  const livre = {
    titre: formData.get('titre'),
    auteur: formData.get('auteur'),
    annee: formData.get('annee'),
    categorie: formData.get('categorie'),
    ficher: formData.get('ficher'),
    isbn: formData.get('isbn'),
    edition: formData.get('edition')
  };
  console.log("livre" ,livre);

  
  
  try {
    const token = localStorage.getItem('token');
    const res = await fetch('http://localhost:5000/api/livres', { 
      method: 'POST',
      headers: {'Content-Type': 'application/json',
        'Authorization': `Bearer `+ token
      },
      body: JSON.stringify(livre)
    });
    
    if (!res.ok) throw new Error('Erreur lors de l\'ajout');
    
    alert('Livre ajouté avec succès !');
    form.reset();
    
  } catch (err) {
    alert(err.message);
  }
});
    </script>
</body>

</html>